<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link type="text/css" rel="stylesheet" href="../../common.css"/>

  <style>
    #thing-raf{
      width: 50px;
      height: 30px;
      background: #bcbcbc;
      position: relative;
      left: 0;
    }
    #thing-st{
      width: 50px;
      height: 30px;
      background: #bcbcbc;
      position: relative;
      top: 50px;
      left: 0;
    }
  </style>
</head>
<body>

<div id="thing-raf"></div>
<div id="thing-st"></div>
<input id="stop" value="Stop" type="button"/>


<script src="easing.js"></script>
<script>
  var requestAnimationFrame = window.requestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      window.msRequestAnimationFrame;

  var isAnim = true;

  var theThing = document.querySelector("#thing-raf");
  var currentPos = 0;

  function moveThing() {
    currentPos += 5;
    theThing.style.left = currentPos + "px";
    if (Math.abs(currentPos) >= 900) {
      currentPos = 0;
    }
    console.log('requestAnimationFrame')
    if(isAnim)
      requestAnimationFrame(moveThing);
  }
  moveThing();

  var theThing2 = document.querySelector("#thing-st");
  var currentPos2 = 0;
  function moveThingSetTimeout(){
    currentPos2 += 5;
    theThing2.style.left = currentPos2 + "px";
    if (Math.abs(currentPos2) >= 900) {
      currentPos2 = 0;
    }
    console.log('setTimeout')
    if(isAnim)
      setTimeout(moveThingSetTimeout, 1000/60);
  }
  moveThingSetTimeout();

  document.querySelector('#stop').onclick = function(){
    isAnim = false;
  }
</script>
</body>
</html>