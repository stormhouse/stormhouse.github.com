<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link type="text/css" rel="stylesheet" href="../../common.css"/>
  <link type="text/css" rel="stylesheet" href="../../lib/syntaxhighlighter/shCore.css"/>
  <link type="text/css" rel="stylesheet" href="../../lib/syntaxhighlighter/shCoreDefault.css"/>

  <style>
        html, body{
          height: 100%;
          overflow: hidden;
          background: black;
          -webkit-user-select: none;
        }

        ul {
          list-style-type:none;
          padding: 0;
          margin-left: 12px;
        }

        ul >li {
          width: 40px;
          height: 40px;
          border-radius:50%;
          opacity: 0.3;
          display: inline-block;
        }

        ul.red >#red, 
        ul.green >#green,
        ul.yellow >#yellow{
          opacity: 1.0;
        }

        #red {
          background: red;
        }

        #yellow {
          background: yellow;
        }

        #green {
          background: green;
        }
  </style>
</head>
<body>
    
<ul id="traffic" class="green">
  <li id="green"></li>
  <li id="yellow"></li>
  <li id="red"></li>
</ul>
    

<script>

function turnGreen(){
    return new Promise(function(resolve, reject) {
        traffic.className = 'green';
      	resolve();
    })
}
function turnRed(){
    return new Promise(function(resolve, reject) {
        traffic.className = 'red';
      	resolve();
    })
}
function turnYellow(){
    return new Promise(function(resolve, reject) {
        traffic.className = 'yellow';
      	resolve();
    })
}
function wait5000(){
    return new Promise(function(resolve, reject) {
        setTimeout(resolve,5000);
    })
}
function wait2000(){
    return new Promise(function(resolve, reject) {
        setTimeout(resolve,2000);
    })
}

//执行！
void function (){
    turnGreen()
    .then(wait5000)
    .then(turnYellow)
    .then(wait2000)
    .then(turnRed)
    .then(wait5000)
    .then(arguments.callee)
}();
    
</script>
</body>
</html>